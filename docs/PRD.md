# Pet Eternal Flame（宠物永恒之焰）产品需求文档 PRD

## 一、产品概述

### 1.1 产品名称
**Pet Eternal Flame**（宠物永恒之焰）

### 1.2 产品定位
以东方玄学文化为主题的宠物追思祭祀网站。用户输入宠物离世日期，系统基于「宠物月 = 人年」的换算与五行、吉凶数理，生成焚烧仪式的时间建议与数量，并辅以轮回、阴阳平衡等文化包装。

### 1.3 目标用户
- 有宠物离世、希望以仪式感追思的用户
- 对传统文化/玄学感兴趣的宠物主人

---

## 二、核心规则与玄学设定

### 2.1 时间换算
- **1 宠物月 = 1 人年**：从死亡日期起，每经过 1 个自然月，计为宠物在「彼世」度过 1 年。
- 系统据此计算「已过宠物月数」，作为焚烧频次与数量的基础。

### 2.2 焚烧时间规则
- **五行对应**：日期与五行（木、火、土、金、水）对应，建议在与之相生的日子进行焚烧。
- **避冲煞**：避免「冲煞日」（可由死亡日干支或简单规则推导）。
- **吉日建议**：优先推荐满月日、或与死亡日相合的日期（如每月固定几日），形成「每月可焚烧一次」的节奏。

### 2.3 焚烧数量规则
- **数理来源**：结合死亡日期（日、月数字）做简单数理/卦象运算，得出基础数量。
- **吉凶数**：
  - **不吉**：4、9 等（可配置）→ 系统自动调整为最近吉数。
  - **吉数**：3、7、8 等优先；总数倾向取 3、6、7、8 等。
- 若计算出不吉数，则向最近吉数取整（如 4→3 或 5，9→8 或 10，按产品设定）。

### 2.4 文化包装
- 文案基调：如「通过焚烧，助宠物轮回，守护阴阳平衡」。
- 界面：古风、烛火、星辰等意象，弱化迷信、强调情感与仪式感。

---

## 三、功能需求

### 3.1 用户输入
- **死亡日期**：日期选择器（必填），选择宠物离世日期。
- 可选：宠物名字、物种（猫/狗/其他），用于展示与后续扩展。

### 3.2 系统输出（调用后端 API 后展示）
- **已过宠物月数**：从死亡日至今的完整月数。
- **焚烧时间列表**：建议的焚烧吉日列表（如接下来 N 个吉日或本月/下月建议日期）。
- **本次建议焚烧数量**：经玄学规则与吉数调整后的数量（如 3/6/7/8 等）。
- **玄学解释**：简短文案说明为何该日、该数量（五行、轮回、阴阳等话术）。

### 3.3 非功能需求
- 支持 **PC + H5** 响应式布局，移动端可单独优化触控与字体。
- 前端：React + TypeScript，状态管理 Jotai，数据请求 SWR，样式 TailwindCSS。
- 后端：Python Flask，提供 REST API，逻辑包含 datetime 月数计算与玄学规则。

---

## 四、技术架构

### 4.1 前端
| 项目     | 选型           |
|----------|----------------|
| 框架     | React 18       |
| 语言     | TypeScript     |
| 构建     | Vite           |
| 样式     | TailwindCSS    |
| 状态     | Jotai          |
| 请求/缓存| SWR            |
| 适配     | PC + H5 响应式 |

### 4.2 后端
| 项目     | 选型           |
|----------|----------------|
| 框架     | Flask          |
| 语言     | Python 3       |
| 接口     | REST JSON API  |

### 4.3 接口约定（示例）
- **POST** `/api/calculate`
  - 请求体：`{ "deathDate": "YYYY-MM-DD" }`
  - 响应：  
    `petMonths`, `burningDates[]`, `suggestedQuantity`, `explanation` 等。

---

## 五、页面与交互

### 5.1 主流程
1. 打开首页 → 古风背景（烛火、星辰）。
2. 输入宠物死亡日期（必填）→ 可选填宠物名。
3. 点击「生成祭祀建议」→ 调用 API。
4. 展示结果：已过宠物月数、建议焚烧日期列表、建议数量、玄学解释文案。

### 5.2 异常与边界
- 死亡日期为未来：提示「请选择已过去的日期」。
- 死亡日期距今过短（如 0 月）：可提示「首月建议从满月或下月吉日开始」并仍给出数量与解释。

---

## 六、玄学规则（实现要点）

### 6.1 吉日（简化）
- 每月固定取几个「吉日」：如 1、6、8、15（满月）、18、28 等，排除与「冲煞」冲突的日期。
- 冲煞可简化为：与死亡日「日」数字相冲的日期不推荐（如死亡日为 5，则 5、15、25 可标记为慎用或替换为相邻日）。

### 6.2 数量算法（简化）
- 基础数 = f(死亡日 day, month)，例如 `(day + month) % 10` 或类似，得到 0–9。
- 映射到吉数：0→8, 1→3, 2→6, 3→3, 4→3 或 5, 5→6, 6→6, 7→7, 8→8, 9→8。
- 再结合「宠物月数」微调（如月数越多，可略增数量上限），避免 4、9。

---

## 七、成功指标（可选）
- 用户完成一次「输入日期 → 看到结果」的完整流程。
- 移动端与 PC 端均可正常使用。
- 玄学解释文案清晰、不引发歧义。

---

*文档版本：1.0 | 项目：Pet Eternal Flame*
